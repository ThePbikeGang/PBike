<Page
    x:Class="EasyBike.WinPhone.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:EasyBike.WinPhone"
    xmlns:helpers="using:EasyBike.WinPhone.Helpers"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:i="using:Microsoft.Xaml.Interactivity"
    xmlns:core="using:Microsoft.Xaml.Interactions.Core"
    xmlns:Maps="using:Windows.UI.Xaml.Controls.Maps"
    xmlns:mvvmHelper="using:EasyBike.WinPhone.Helpers"  
    mvvmHelper:VisualStatesHelper.CurrentVisualState="{Binding VisualState}"
    mc:Ignorable="d"
    FontFamily="Global User Interface" Background="{x:Null}" Width="Auto" Height="Auto"
    >


    <Page.Resources>


        <!--POIs-->
        <ControlTemplate x:Key="StationTemplate">
            <!--Maps:MapControl.NormalizedAnchorPoint="0.5,0" CacheMode="BitmapCache"-->
            <Canvas x:Name="VelibTemplateStationRootCanvas" Height="20" 
				
			
				Width="20" RenderTransformOrigin="0,0" ManipulationMode="All" ManipulationStarting="VelibTemplateStationRootCanvas_ManipulationStarting" >
                <Canvas.RenderTransform>
                    <CompositeTransform/>
                </Canvas.RenderTransform>


                <VisualStateManager.VisualStateGroups>
                    <VisualStateGroup x:Name="VisualStateGroup">

                        <VisualState x:Name="Normal">
                            <Storyboard>


                            </Storyboard>
                        </VisualState>
                        <VisualState x:Name="ShowCluster">
                            <Storyboard>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleX)" Storyboard.TargetName="VelibTemplateStationRootCanvas">
                                    <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                                    <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="1">
                                        <EasingDoubleKeyFrame.EasingFunction>
                                            <BackEase EasingMode="EaseOut" Amplitude="0.4"/>
                                        </EasingDoubleKeyFrame.EasingFunction>
                                    </EasingDoubleKeyFrame>
                                </DoubleAnimationUsingKeyFrames>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleY)" Storyboard.TargetName="VelibTemplateStationRootCanvas">
                                    <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                                    <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="1">
                                        <EasingDoubleKeyFrame.EasingFunction>
                                            <BackEase EasingMode="EaseOut" Amplitude="0.4"/>
                                        </EasingDoubleKeyFrame.EasingFunction>
                                    </EasingDoubleKeyFrame>
                                </DoubleAnimationUsingKeyFrames>
                                <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="textBlock" d:IsOptimized="True"/>
                                <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="textBlockClusterNumber" d:IsOptimized="True"/>
                                <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ellipse" d:IsOptimized="True"/>
                                <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="path" d:IsOptimized="True"/>
                                <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="ellipse_Copy" d:IsOptimized="True"/>
                                <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="image" d:IsOptimized="True"/>
                                <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="image_Copy" d:IsOptimized="True"/>
                            </Storyboard>
                        </VisualState>
                        <VisualState x:Name="ShowStation">
                            <Storyboard>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleX)" Storyboard.TargetName="VelibTemplateStationRootCanvas">
                                    <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                                    <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="1">
                                        <EasingDoubleKeyFrame.EasingFunction>
                                            <BackEase EasingMode="EaseOut" Amplitude="0.4"/>
                                        </EasingDoubleKeyFrame.EasingFunction>
                                    </EasingDoubleKeyFrame>
                                </DoubleAnimationUsingKeyFrames>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleY)" Storyboard.TargetName="VelibTemplateStationRootCanvas">
                                    <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                                    <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="1">
                                        <EasingDoubleKeyFrame.EasingFunction>
                                            <BackEase EasingMode="EaseOut" Amplitude="0.4"/>
                                        </EasingDoubleKeyFrame.EasingFunction>
                                    </EasingDoubleKeyFrame>
                                </DoubleAnimationUsingKeyFrames>
                            </Storyboard>
                        </VisualState>
                        <VisualState x:Name="ShowNumberImage">
                            <Storyboard>
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="grid">
                                    <DiscreteObjectKeyFrame KeyTime="0">
                                        <DiscreteObjectKeyFrame.Value>
                                            <Visibility>Visible</Visibility>
                                        </DiscreteObjectKeyFrame.Value>
                                    </DiscreteObjectKeyFrame>
                                </ObjectAnimationUsingKeyFrames>
                            </Storyboard>
                        </VisualState>



                    </VisualStateGroup>
                    <VisualStateGroup x:Name="VisualStateGroup1">
                        <VisualState x:Name="Loaded">
                            <Storyboard>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleX)" Storyboard.TargetName="VelibTemplateStationRootCanvas">
                                    <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                                    <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="1">
                                        <EasingDoubleKeyFrame.EasingFunction>
                                            <BackEase EasingMode="EaseOut" Amplitude="0.4"/>
                                        </EasingDoubleKeyFrame.EasingFunction>
                                    </EasingDoubleKeyFrame>
                                </DoubleAnimationUsingKeyFrames>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleY)" Storyboard.TargetName="VelibTemplateStationRootCanvas">
                                    <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                                    <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="1">
                                        <EasingDoubleKeyFrame.EasingFunction>
                                            <BackEase EasingMode="EaseOut" Amplitude="0.4"/>
                                        </EasingDoubleKeyFrame.EasingFunction>
                                    </EasingDoubleKeyFrame>
                                </DoubleAnimationUsingKeyFrames>
                            </Storyboard>
                        </VisualState>
                        <VisualState x:Name="Clear"/>
                        <VisualState x:Name="Click">
                            <Storyboard>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleY)" Storyboard.TargetName="VelibTemplateStationRootCanvas">
                                    <EasingDoubleKeyFrame KeyTime="0:0:0.05" Value="0.7">
                                        <EasingDoubleKeyFrame.EasingFunction>
                                            <CircleEase EasingMode="EaseOut"/>
                                        </EasingDoubleKeyFrame.EasingFunction>
                                    </EasingDoubleKeyFrame>
                                    <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="1">
                                        <EasingDoubleKeyFrame.EasingFunction>
                                            <BackEase EasingMode="EaseOut" Amplitude="0.5"/>
                                        </EasingDoubleKeyFrame.EasingFunction>
                                    </EasingDoubleKeyFrame>
                                </DoubleAnimationUsingKeyFrames>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleX)" Storyboard.TargetName="VelibTemplateStationRootCanvas">
                                    <EasingDoubleKeyFrame KeyTime="0:0:0.05" Value="0.7">
                                        <EasingDoubleKeyFrame.EasingFunction>
                                            <CircleEase EasingMode="EaseOut"/>
                                        </EasingDoubleKeyFrame.EasingFunction>
                                    </EasingDoubleKeyFrame>
                                    <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="1">
                                        <EasingDoubleKeyFrame.EasingFunction>
                                            <BackEase EasingMode="EaseOut" Amplitude="0.5"/>
                                        </EasingDoubleKeyFrame.EasingFunction>
                                    </EasingDoubleKeyFrame>
                                </DoubleAnimationUsingKeyFrames>
                            </Storyboard>
                        </VisualState>

                    </VisualStateGroup>
                    <VisualStateGroup x:Name="VisualStateGroup2">
                        <VisualStateGroup.Transitions>
                            <VisualTransition GeneratedDuration="0"/>
                        </VisualStateGroup.Transitions>
                    </VisualStateGroup>
                </VisualStateManager.VisualStateGroups>


                <!--<Grid Visibility="{Binding SelectedFlagVisibility}" IsHitTestVisible="False" Height="30" Canvas.Left="42" Canvas.Top="-10" >
                <Ellipse Fill="Black" Stroke="#FF09C203" Margin="0" StrokeThickness="3"/>
                <TextBlock Height="30" 
        			Text="{Binding pa}" VerticalAlignment="Center" 
                    Foreground="{StaticResource PhoneAccentBrush}" Margin="6,3,6,0" HorizontalAlignment="Center"  />
            </Grid>-->



                <Image x:Name="image" Height="10" Width="32" Source="Assets/ombre.png" Canvas.Top="-5" Canvas.Left="-16" Opacity="0.4"/>
                <Ellipse x:Name="ellipse_Copy" Fill="{ThemeResource ProgressBarBackgroundThemeBrush}" Height="58" Canvas.Left="-29" Canvas.Top="-29" Width="58" StrokeThickness="2" Opacity="0" d:IsHidden="True"/>
                <Ellipse x:Name="ellipse" Height="48" Canvas.Left="-24" Canvas.Top="-24" Width="48" StrokeThickness="2" Stroke="#CC000000" Opacity="0" Fill="#FF9B9B9B" d:IsHidden="True"/>
                <Path x:Name="path" Data="M89.9999,1 C94.8623,1 99.7249,2.85498 103.435,6.56496 C110.043,13.1734 110.059,24.1457 104.896,31.554 L103.435,33.4349 L89.9999,46.87 L76.2225,33.0838 C69.1468,25.6402 69.261,13.869 76.5649,6.56496 C80.2749,2.85498 85.1374,1 89.9999,1 z" Fill="#FF9B9B9B" Height="47.87" Stretch="Fill" Canvas.Top="-47" UseLayoutRounding="False" Width="40" RenderTransformOrigin="0.5,0.5" Canvas.Left="-20.25" d:IsHidden="True">
                    <Path.RenderTransform>
                        <CompositeTransform/>
                    </Path.RenderTransform>
                </Path>


                <!--<Grid Visibility="{Binding SelectedFlagVisibility}" IsHitTestVisible="False" Height="30" Canvas.Left="42" Canvas.Top="-10" >
                <Ellipse Fill="Black" Stroke="#FF09C203" Margin="0" StrokeThickness="3"/>
                <TextBlock Height="30" 
        			Text="{Binding pa}" VerticalAlignment="Center" 
                    Foreground="{StaticResource PhoneAccentBrush}" Margin="6,3,6,0" HorizontalAlignment="Center"  />
            </Grid>-->

                <!--Binding AvailableBikesStr}-->
                <TextBlock x:Name="textBlock" Text="{Binding AvailableStr}" 
            		VerticalAlignment="Center" 
            		FontSize="16" 
            		FontWeight="Bold" 
            		TextAlignment="Center" 
            		Canvas.Left="-12" Canvas.Top="-35" Width="24" 
            		IsColorFontEnabled="False" 
            		IsHitTestVisible="False" Foreground="Black" 
					IsTextScaleFactorEnabled="False" d:IsHidden="True"
				/>
                <TextBlock x:Name="textBlockClusterNumber" 
            		FontSize="24" 
            		FontWeight="Bold" 
            		TextAlignment="Center" 
            		Canvas.Left="-17" Canvas.Top="-14" Width="34" 
            		IsColorFontEnabled="False" 
            		IsHitTestVisible="False" Foreground="White" Opacity="0" d:IsHidden="True" 
				/>
                <Grid x:Name="grid" Canvas.Top="-37" Canvas.Left="-16" Width="32" Height="20" Visibility="Collapsed" d:IsHidden="True">
                    <Image x:Name="image_Copy" Source="{Binding ImageNumber}" HorizontalAlignment="Center" VerticalAlignment="Center" d:IsHidden="True" />
                </Grid>






            </Canvas>
        </ControlTemplate>
        <Storyboard x:Key="NorthIndicatorStoryboard">
            <DoubleAnimation Duration="0:0:0.2" To="0" 
                             Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.Rotation)" 
                             Storyboard.TargetName="NorthIndicator" d:IsOptimized="True"/>
        </Storyboard>
        <Storyboard x:Key="UserLocationStoryboard">
            <DoubleAnimation Duration="0:0:0.2" To="0" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.Rotation)" Storyboard.TargetName="UserLocation" d:IsOptimized="True">
                <!--<DoubleAnimation.EasingFunction>
    							<SineEase EasingMode="EaseOut"/>
    						</DoubleAnimation.EasingFunction>-->
            </DoubleAnimation>
        </Storyboard>
        <Storyboard x:Key="AccuracyStoryboard">
            <DoubleAnimation Duration="0:0:1" To="0" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleX)" Storyboard.TargetName="accuracy" d:IsOptimized="True">
                <DoubleAnimation.EasingFunction>
                    <CircleEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Duration="0:0:1" To="0" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleY)" Storyboard.TargetName="accuracy" d:IsOptimized="True">
                <DoubleAnimation.EasingFunction>
                    <CircleEase EasingMode="EaseOut"/>
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>
        <ControlTemplate x:Key="ClusterTemplate">
            <!--Maps:MapControl.NormalizedAnchorPoint="0.5,0"-->
            <Canvas x:Name="rootCanvas" Height="20" 
				
			
				Width="20" RenderTransformOrigin="0.5,0.5">
                <Canvas.RenderTransform>
                    <CompositeTransform/>
                </Canvas.RenderTransform>


                <VisualStateManager.VisualStateGroups>
                    <VisualStateGroup x:Name="VisualStateGroup">
                        <VisualStateGroup.Transitions>
                            <VisualTransition GeneratedDuration="0"/>
                            <VisualTransition From="Selected" GeneratedDuration="0:0:0.2">
                                <VisualTransition.GeneratedEasingFunction>
                                    <CircleEase EasingMode="EaseOut"/>
                                </VisualTransition.GeneratedEasingFunction>
                            </VisualTransition>
                        </VisualStateGroup.Transitions>
                        <VisualState x:Name="Normal"/>
                        <VisualState x:Name="Selected">
                            <Storyboard>

                                <DoubleAnimation Duration="0:0:0.2" To="0" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleX)" Storyboard.TargetName="path" />
                                <DoubleAnimation Duration="0:0:0.2" To="0" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleY)" Storyboard.TargetName="path" />

                                <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="stackPanel">
                                    <DiscreteObjectKeyFrame KeyTime="0">
                                        <DiscreteObjectKeyFrame.Value>
                                            <Visibility>Visible</Visibility>
                                        </DiscreteObjectKeyFrame.Value>
                                    </DiscreteObjectKeyFrame>
                                </ObjectAnimationUsingKeyFrames>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleX)" Storyboard.TargetName="stackPanel">
                                    <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                                    <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="1">
                                        <EasingDoubleKeyFrame.EasingFunction>
                                            <BackEase EasingMode="EaseOut" Amplitude="0.4"/>
                                        </EasingDoubleKeyFrame.EasingFunction>
                                    </EasingDoubleKeyFrame>
                                </DoubleAnimationUsingKeyFrames>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleY)" Storyboard.TargetName="stackPanel">
                                    <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                                    <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="1">
                                        <EasingDoubleKeyFrame.EasingFunction>
                                            <BackEase EasingMode="EaseOut" Amplitude="0.4"/>
                                        </EasingDoubleKeyFrame.EasingFunction>
                                    </EasingDoubleKeyFrame>
                                </DoubleAnimationUsingKeyFrames>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="stackPanel">
                                    <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                                    <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="1"/>
                                </DoubleAnimationUsingKeyFrames>
                            </Storyboard>
                        </VisualState>
                        <VisualState x:Name="Loaded">
                            <Storyboard>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleX)" Storyboard.TargetName="rootCanvas">
                                    <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                                    <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="1">
                                        <EasingDoubleKeyFrame.EasingFunction>
                                            <BackEase EasingMode="EaseOut" Amplitude="0.4"/>
                                        </EasingDoubleKeyFrame.EasingFunction>
                                    </EasingDoubleKeyFrame>
                                </DoubleAnimationUsingKeyFrames>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleY)" Storyboard.TargetName="rootCanvas">
                                    <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                                    <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="1">
                                        <EasingDoubleKeyFrame.EasingFunction>
                                            <BackEase EasingMode="EaseOut" Amplitude="0.4"/>
                                        </EasingDoubleKeyFrame.EasingFunction>
                                    </EasingDoubleKeyFrame>
                                </DoubleAnimationUsingKeyFrames>
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="rootCanvas">
                                    <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                                    <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="1"/>
                                </DoubleAnimationUsingKeyFrames>
                            </Storyboard>
                        </VisualState>
                        <VisualState x:Name="BeforeLoaded">
                            <Storyboard>
                                <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="rootCanvas" />
                            </Storyboard>
                        </VisualState>
                    </VisualStateGroup>
                </VisualStateManager.VisualStateGroups>


                <!--<Grid Visibility="{Binding SelectedFlagVisibility}" IsHitTestVisible="False" Height="30" Canvas.Left="42" Canvas.Top="-10" >
                <Ellipse Fill="Black" Stroke="#FF09C203" Margin="0" StrokeThickness="3"/>
                <TextBlock Height="30" 
        			Text="{Binding pa}" VerticalAlignment="Center" 
                    Foreground="{StaticResource PhoneAccentBrush}" Margin="6,3,6,0" HorizontalAlignment="Center"  />
            </Grid>-->



                <Path x:Name="path" Data="M89.9999,1 C94.8623,1 99.7249,2.85498 103.435,6.56496 C110.043,13.1734 110.059,24.1457 104.896,31.554 L103.435,33.4349 L89.9999,46.87 L76.2225,33.0838 C69.1468,25.6402 69.261,13.869 76.5649,6.56496 C80.2749,2.85498 85.1374,1 89.9999,1 z" Fill="#4C000000" Height="47.87" Stretch="Fill" Stroke="Black" StrokeThickness="2" Canvas.Top="-47" UseLayoutRounding="False" Width="40" RenderTransformOrigin="0.5,0.5" Canvas.Left="-20.25">
                    <Path.RenderTransform>
                        <CompositeTransform/>
                    </Path.RenderTransform>
                </Path>
                <Grid Height="30" Width="30" Canvas.Left="-15" Canvas.Top="-42">
                    <TextBlock Text="{Binding count}" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="16" FontWeight="Bold" TextAlignment="Center"/>
                </Grid>




                <Grid x:Name="stackPanel" HorizontalAlignment="Left" Background="#7F000000" Canvas.Left="-100" Canvas.Top="-80" MinWidth="100" RenderTransformOrigin="0.5,0.5" Height="74" Width="200" Margin="0" Visibility="Collapsed">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RenderTransform>
                        <CompositeTransform/>
                    </Grid.RenderTransform>
                    <!--Source="Assets/WP8AppbarIcons/audio.png"-->

                    <RichTextBlock Grid.Column="1" TextTrimming="CharacterEllipsis" VerticalAlignment="Center" HorizontalAlignment="Left" IsTextSelectionEnabled="False" IsColorFontEnabled="False" Margin="3,3,0,3" FontFamily="Global User Interface">
                        <Paragraph>
                            <Run Text="{Binding Address}"  FontSize="10"/>
                        </Paragraph>
                        <Paragraph>
                            <Run Text="Vélos disponibles :"  FontSize="12"/>
                            <Run Text="{Binding AvailableBikesStr}"  FontSize="15" FontFamily="Global User Interface"/>
                        </Paragraph>
                    </RichTextBlock>
                    <Rectangle VerticalAlignment="Center" Height="45" Width="45" HorizontalAlignment="Center" Grid.Column="3" Fill="White" Margin="3"/>
                    <Path Data="M28.6295,13.5002 L44.2042,13.5002 L36.4169,21.2875 z" Stretch="Fill" UseLayoutRounding="False" Fill="#7F000000" Margin="91.856,73.993,41.311,-9.121" Grid.Column="1" Width="16"/>
                </Grid>



            </Canvas>
        </ControlTemplate>

        <DataTemplate x:Key="EventPoiTemplate" >

            <!--<controls:VelibControl Template="{StaticResource VelibTemplate}" Tapped="VelibTapped" />-->
            <!--<StackPanel Background="Black"
            
            Tapped="EventTapped">
                <TextBlock Maps:MapControl.Location="{Binding Location}" 
                                       Text="{Binding Name}" 
                                        FontSize="20" Margin="5"/>
            </StackPanel>-->

        </DataTemplate>
        <SolidColorBrush x:Key="PhoneRadioCheckBoxBrush" Color="Transparent"/>
        <x:Double x:Key="TextStyleLargeFontSize">18.14</x:Double>
        <FontFamily x:Key="PhoneFontFamilyNormal">Segoe WP</FontFamily>
        <Thickness x:Key="CheckBoxAndRadioButtonTextPaddingThickness">8,0,0,0</Thickness>
        <x:Double x:Key="CheckBoxAndRadioButtonMinWidthSize">168</x:Double>
        <x:Double x:Key="PhoneStrokeThickness">2.5</x:Double>
        <Thickness x:Key="PhoneTouchTargetLargeOverhang">0,16</Thickness>
        <Style x:Key="RadioButtonStyle1" TargetType="RadioButton">
            <Setter Property="Background" Value="{ThemeResource PhoneRadioCheckBoxBrush}"/>
            <Setter Property="BorderBrush" Value="{ThemeResource PhoneRadioCheckBoxBorderBrush}"/>
            <Setter Property="FontSize" Value="{ThemeResource TextStyleLargeFontSize}"/>
            <Setter Property="FontFamily" Value="{ThemeResource PhoneFontFamilyNormal}"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="VerticalContentAlignment" Value="Top"/>
            <Setter Property="HorizontalAlignment" Value="Left"/>
            <Setter Property="VerticalAlignment" Value="Top"/>
            <Setter Property="Padding" Value="{ThemeResource CheckBoxAndRadioButtonTextPaddingThickness}"/>
            <Setter Property="MinWidth" Value="{ThemeResource CheckBoxAndRadioButtonMinWidthSize}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="RadioButton">
                        <Grid Background="Transparent" ScrollViewer.VerticalScrollBarVisibility="Disabled">
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="CommonStates">
                                    <VisualState x:Name="Normal"/>
                                    <VisualState x:Name="MouseOver"/>
                                    <VisualState x:Name="PointerOver"/>
                                    <VisualState x:Name="Pressed">
                                        <Storyboard>
                                            <PointerDownThemeAnimation Storyboard.TargetName="Container"/>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="CheckBackground">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ButtonPressedBackgroundThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="CheckMark">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ButtonPressedForegroundThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="Disabled">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Stroke" Storyboard.TargetName="CheckBackground">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ButtonDisabledBorderThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Fill" Storyboard.TargetName="CheckMark">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ButtonDisabledBorderThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentPresenter">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ButtonDisabledForegroundThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                                <VisualStateGroup x:Name="CheckStates">
                                    <VisualState x:Name="Checked">
                                        <Storyboard>
                                            <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="CheckBackground" d:IsOptimized="True"/>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="Unchecked"/>
                                    <VisualState x:Name="Indeterminate"/>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <Grid x:Name="Container" Margin="10">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Grid>
                                    <Ellipse x:Name="CheckBackground" Fill="{TemplateBinding Background}" IsHitTestVisible="False" Stroke="{TemplateBinding BorderBrush}" StrokeThickness="{ThemeResource PhoneStrokeThickness}"/>
                                    <Ellipse x:Name="CheckMark" Fill="{ThemeResource PhoneRadioCheckBoxCheckBrush}" HorizontalAlignment="Center" Height="12.5" IsHitTestVisible="False" Visibility="Collapsed" VerticalAlignment="Center" Width="12.5"/>
                                    <ContentPresenter x:Name="ContentPresenter" AutomationProperties.AccessibilityView="Raw" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Foreground="{TemplateBinding Foreground}" FontSize="{TemplateBinding FontSize}" FontFamily="{TemplateBinding FontFamily}" HorizontalAlignment="Center" VerticalAlignment="Center" />


                                </Grid>
                            </Grid>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Thickness x:Key="PhoneBorderThickness">2.5</Thickness>
        <FontWeight x:Key="PhoneButtonFontWeight">Semibold</FontWeight>
        <x:Double x:Key="PhoneButtonMinHeight">57.5</x:Double>
        <x:Double x:Key="PhoneButtonMinWidth">109</x:Double>
        <Thickness x:Key="PhoneTouchTargetOverhang">0,9.5</Thickness>
        <Style x:Key="ToggleButtonStyle1" TargetType="ToggleButton">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderBrush" Value="{ThemeResource PhoneForegroundBrush}"/>
            <Setter Property="Foreground" Value="{ThemeResource PhoneForegroundBrush}"/>
            <Setter Property="BorderThickness" Value="{ThemeResource PhoneBorderThickness}"/>
            <Setter Property="FontFamily" Value="{ThemeResource PhoneFontFamilyNormal}"/>
            <Setter Property="FontWeight" Value="{ThemeResource PhoneButtonFontWeight}"/>
            <Setter Property="FontSize" Value="{ThemeResource TextStyleLargeFontSize}"/>
            <Setter Property="Padding" Value="9.5,0"/>
            <Setter Property="MinHeight" Value="{ThemeResource PhoneButtonMinHeight}"/>

            <Setter Property="HorizontalAlignment" Value="Left"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ToggleButton">
                        <Grid Background="Transparent" Height="40">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="CommonStates">
                                    <VisualState x:Name="Normal">
                                        <Storyboard>
                                            <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="CheckBackground" d:IsOptimized="True"/>
                                            <DoubleAnimation Duration="0" To="0.3" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="CheckBackground1" d:IsOptimized="True"/>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="PointerOver"/>
                                    <VisualState x:Name="Pressed"/>
                                    <VisualState x:Name="Disabled"/>
                                    <VisualState x:Name="Checked">
                                        <Storyboard>
                                            <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="CheckBackground1" d:IsOptimized="True"/>
                                            <DoubleAnimation Duration="0" To="0.345" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="CheckBackground" d:IsOptimized="True"/>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="CheckedPointerOver"/>
                                    <VisualState x:Name="CheckedPressed"/>
                                    <VisualState x:Name="CheckedDisabled"/>
                                    <VisualState x:Name="Indeterminate"/>
                                    <VisualState x:Name="IndeterminatePointerOver"/>
                                    <VisualState x:Name="IndeterminatePressed"/>
                                    <VisualState x:Name="IndeterminateDisabled"/>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <Ellipse x:Name="CheckBackground" Fill="{TemplateBinding Background}" IsHitTestVisible="False" Stroke="{TemplateBinding BorderBrush}" StrokeThickness="{ThemeResource PhoneStrokeThickness}" Opacity="0.995" Width="40"/>
                            <Image Source="Assets/bikeIcon.png" Width="26"/>
                            <Ellipse x:Name="CheckBackground1" Fill="{TemplateBinding Background}" IsHitTestVisible="False" Stroke="{TemplateBinding BorderBrush}" StrokeThickness="{ThemeResource PhoneStrokeThickness}" Opacity="0.45" Grid.Column="1" Width="40" Margin="7,0,0,0"/>
                            <TextBlock HorizontalAlignment="Center" TextWrapping="Wrap" Text="P" VerticalAlignment="Center" Foreground="White" FontSize="26.667" FontFamily="Global User Interface" FontWeight="Bold" Grid.ColumnSpan="2" Grid.Column="1" Margin="8,0,0,-1"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <SolidColorBrush x:Key="ButtonDisabledBackgroundThemeBrush" Color="Transparent"/>

        <Style x:Key="ButtonStyleLeftAlign" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderBrush" Value="{ThemeResource PhoneForegroundBrush}"/>
            <Setter Property="Foreground" Value="{ThemeResource PhoneForegroundBrush}"/>
            <Setter Property="BorderThickness" Value="{ThemeResource PhoneBorderThickness}"/>
            <Setter Property="FontFamily" Value="{ThemeResource PhoneFontFamilyNormal}"/>
            <Setter Property="FontWeight" Value="{ThemeResource PhoneButtonFontWeight}"/>
            <Setter Property="FontSize" Value="{ThemeResource TextStyleLargeFontSize}"/>
            <Setter Property="HorizontalAlignment" Value="Left"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Grid x:Name="Grid" Background="Transparent">
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="CommonStates">
                                    <VisualStateGroup.Transitions>
                                        <VisualTransition From="Pressed" To="PointerOver">
                                            <Storyboard>
                                                <PointerUpThemeAnimation Storyboard.TargetName="Grid"/>
                                            </Storyboard>
                                        </VisualTransition>
                                        <VisualTransition From="PointerOver" To="Normal">
                                            <Storyboard>
                                                <PointerUpThemeAnimation Storyboard.TargetName="Grid"/>
                                            </Storyboard>
                                        </VisualTransition>
                                        <VisualTransition From="Pressed" To="Normal">
                                            <Storyboard>
                                                <PointerUpThemeAnimation Storyboard.TargetName="Grid"/>
                                            </Storyboard>
                                        </VisualTransition>
                                    </VisualStateGroup.Transitions>
                                    <VisualState x:Name="Normal"/>
                                    <VisualState x:Name="PointerOver"/>
                                    <VisualState x:Name="Pressed">
                                        <Storyboard>
                                            <PointerDownThemeAnimation Storyboard.TargetName="Grid"/>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentPresenter">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ButtonPressedForegroundThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="Border">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ButtonPressedBackgroundThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="Disabled">
                                        <Storyboard>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentPresenter">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ButtonDisabledForegroundThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="Border">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ButtonDisabledBorderThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="Border">
                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource ButtonDisabledBackgroundThemeBrush}"/>
                                            </ObjectAnimationUsingKeyFrames>
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <Border x:Name="Border" BorderBrush="{TemplateBinding BorderBrush}" Background="{TemplateBinding Background}">
                                <ContentPresenter x:Name="ContentPresenter" AutomationProperties.AccessibilityView="Raw" ContentTemplate="{TemplateBinding ContentTemplate}" Content="{TemplateBinding Content}" Foreground="{TemplateBinding Foreground}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" Margin="10,20"/>
                            </Border>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <SolidColorBrush x:Key="FlyoutBackgroundThemeBrushLowOpacity" Opacity="0.8" 
		Color="{Binding Path=Color, Source={StaticResource FlyoutBackgroundThemeBrush}}"/>

        <!-- Default style for Windows.UI.Xaml.Controls.FlyoutPresenter -->
        <Style x:Key="FlyoutPresenterStyle1" TargetType="FlyoutPresenter">

            <Setter Property="Background" Value="{StaticResource FlyoutBackgroundThemeBrushLowOpacity}"/>




        </Style>
    </Page.Resources>

    <i:Interaction.Behaviors>
        <core:EventTriggerBehavior EventName="Loaded">
            <core:InvokeCommandAction Command="{Binding MainPageLoadedCommand}"/>
        </core:EventTriggerBehavior>
    </i:Interaction.Behaviors>
    <Page.BottomAppBar>
        <CommandBar MinHeight="25" Background="#7F000000" Opacity="0.5">
            <CommandBar.SecondaryCommands>
                <AppBarButton Label="download cities" Command="{Binding GoToDownloadCitiesCommand}"/>
                <AppBarButton Label="settings" Command="{Binding GoToSettingsCommand}" />
                <AppBarButton Label="how to use this app" Command="{Binding HowToUseThisAppCommand}" />
                <AppBarButton Label="about" Command="{Binding AboutCommand}"/>
                <!--<AppBarButton Label="show crash logs" Click="CrashLogsButton_Click"/>-->
            </CommandBar.SecondaryCommands>
            <AppBarButton x:Name="FavoritsButton"  Label="Favorites" Icon="Favorite" Command="{Binding GoToFavoritsCommand}" />
            <AppBarButton x:Name="LocationButton"  Click="LocationButton_Click" Label="Location" Icon="Target" FontFamily="Global User Interface"/>
            <AppBarButton x:Name="SearchButton"  Click="SearchButton_Click" Label="Search" Icon="Find"/>
        </CommandBar>
    </Page.BottomAppBar>

    <Grid x:Name="LayoutRoot" Margin="0" Background="{x:Null}">
        <FlyoutBase.AttachedFlyout>
            <Flyout x:Name="VelibFlyout"   FlyoutPresenterStyle="{StaticResource FlyoutPresenterStyle1}">

                <StackPanel>
                    <Button HorizontalAlignment="Stretch" Click="FlyoutButtonDriveTo_Click" Style="{StaticResource ButtonStyleLeftAlign}">

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="80"/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <TextBlock HorizontalAlignment="Left" 
						TextWrapping="Wrap" 
						Text="&#xE102;"
						VerticalAlignment="Center" 
						FontFamily="Segoe UI Symbol" 
						FontSize="32" Margin="15,0"
						/>
                            <StackPanel Grid.Column="2" Margin="0">
                                <TextBlock Text="Drive to" FontSize="{StaticResource TextStyleExtraLargeFontSize}"/>
                                <TextBlock Text="Start a driving app" FontSize="{StaticResource TextStyleLargeFontSize}" Style="{StaticResource ListViewItemSubheaderTextBlockStyle}"/>

                            </StackPanel>
                        </Grid>
                    </Button>

                    <Button HorizontalAlignment="Stretch" Click="FlyoutButtonAddFavorit_Click" Style="{StaticResource ButtonStyleLeftAlign}" FontFamily="Global User Interface">

                        <Button.Flyout>
                            <Flyout x:Name="FavoriteFlyout" FlyoutPresenterStyle="{StaticResource FlyoutPresenterStyle1}" >

                                <StackPanel>
                                    <TextBlock
								Style="{StaticResource FlyoutPickerTitleTextBlockStyle}" FontFamily="Global User Interface" Margin="0,19,0,10" FontSize="24">
								<Run Text="Type a name"/>
                                    </TextBlock>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBox x:Name="FavoriteNameTextBox" 
								
									CharacterSpacing="{ThemeResource PivotHeaderItemCharacterSpacing}" PlaceholderText="Favorite name" 
									KeyUp="FavoriteNameTextBox_KeyUp" VerticalAlignment="Center" Margin="3,0" FontFamily="Global User Interface"/>
                                        <Button Click="FavoriteNameButtonOk_Click" Content="Ok" Margin="0" Grid.Column="1" Style="{StaticResource SimpleButton}" FontFamily="Global User Interface"/>
                                    </Grid>

                                </StackPanel>

                            </Flyout>
                        </Button.Flyout>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="80
								"/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>
                            <TextBlock HorizontalAlignment="Left" 
								TextWrapping="Wrap" 
								Text="&#xE113;"
								VerticalAlignment="Center" 
								FontFamily="Segoe UI Symbol" 
								FontSize="32" Margin="15,0"
						/>
                            <StackPanel Grid.Column="2">
                                <TextBlock Text="Add to favorites" FontSize="{StaticResource TextStyleExtraLargeFontSize}"/>
                                <TextBlock Text="Store a personal location" FontSize="{StaticResource TextStyleLargeFontSize}" Style="{StaticResource ListViewItemSubheaderTextBlockStyle}"/>

                            </StackPanel>

                        </Grid>

                    </Button>
                    <Button HorizontalAlignment="Stretch" Style="{StaticResource ButtonStyleLeftAlign}">

                        <Button.Flyout>
                            <Flyout x:Name="FavoriteFlyout1" FlyoutPresenterStyle="{StaticResource FlyoutPresenterStyle1}">

                                <StackPanel>
                                    <Button Click="ShareByTextButton_Click" VerticalAlignment="Stretch" Style="{StaticResource SimpleButton}" HorizontalAlignment="Stretch" HorizontalContentAlignment="Left" Margin="0" Height="90" FontSize="24">
                                        <StackPanel Orientation="Horizontal" Margin="27,0,0,0">
                                            <Canvas>
                                                <!--<TextBlock  Text="&#xE070;" FontFamily="Segoe UI Symbol" FontSize="26.667" VerticalAlignment="Center" Canvas.Left="-1" Width="31"/>-->
                                                <!--<TextBlock  Text="&#xE20B;" FontFamily="Segoe UI Symbol" FontSize="26.667" VerticalAlignment="Center" Canvas.Left="10" Width="20"/>-->
                                                <!--<TextBlock  Text="&#xE20B;" FontFamily="Segoe UI Symbol" FontSize="26.667" VerticalAlignment="Center" Canvas.Left="10" Width="20"/>-->
                                                <Path Data="M7.92979,22.4485 L15.0002,22.4485 C15.246,22.4485 15.4778,22.4865 15.6957,22.5626 C15.9136,22.6387 16.1059,22.747 16.2725,22.8876 C16.4391,23.0282 16.5725,23.1908 16.6728,23.3754 C16.773,23.56 16.8231,23.7588 16.8231,23.9719 C16.8231,24.1838 16.7725,24.3856 16.6712,24.5775 C16.57,24.7694 16.4365,24.9352 16.2708,25.0749 C16.105,25.2147 15.9152,25.3219 15.7014,25.3965 C15.4876,25.4711 15.2538,25.5084 15.0002,25.5084 L7.92979,25.5084 C7.67642,25.5084 7.44387,25.4714 7.23215,25.3975 C7.02042,25.3236 6.83219,25.2172 6.66746,25.0782 C6.50273,24.9392 6.37029,24.7749 6.27012,24.5851 C6.16995,24.3954 6.11987,24.191 6.11987,23.9719 C6.11987,23.7519 6.16944,23.5505 6.26859,23.3678 C6.36774,23.185 6.50019,23.0237 6.66594,22.8839 C6.83168,22.744 7.02242,22.6365 7.23815,22.5613 C7.45388,22.4861 7.68442,22.4485 7.92979,22.4485 z M4.16672,16.0942 L12.7866,16.0942 C13.0237,16.0942 13.2512,16.1323 13.4691,16.2084 C13.687,16.2844 13.8788,16.3923 14.0445,16.532 C14.2101,16.6718 14.3436,16.8375 14.4448,17.0294 C14.5459,17.2212 14.5965,17.4217 14.5965,17.6307 C14.5965,17.8465 14.5464,18.0467 14.4462,18.2313 C14.346,18.4159 14.2138,18.5775 14.0497,18.716 C13.8855,18.8546 13.6945,18.9644 13.4764,19.0455 C13.2584,19.1266 13.0285,19.1672 12.7866,19.1672 L4.16672,19.1672 C3.91647,19.1672 3.68352,19.1271 3.46786,19.0468 C3.2522,18.9666 3.06271,18.8576 2.89941,18.7198 C2.7361,18.582 2.60484,18.4217 2.50563,18.239 C2.40641,18.0563 2.3568,17.8535 2.3568,17.6307 C2.3568,17.4144 2.40692,17.2113 2.50715,17.0216 C2.60739,16.8318 2.73983,16.6674 2.9045,16.5284 C3.06916,16.3894 3.25935,16.2822 3.47508,16.207 C3.69081,16.1318 3.92135,16.0942 4.16672,16.0942 z M0.364588,9.73997 L11.2501,9.73997 C11.4872,9.73997 11.7147,9.77802 11.9326,9.85411 C12.1505,9.9302 12.3423,10.0381 12.508,10.1778 C12.6737,10.3175 12.8071,10.4833 12.9083,10.6751 C13.0095,10.867 13.0601,11.0674 13.0601,11.2764 C13.0601,11.4883 13.0092,11.6907 12.9074,11.8836 C12.8056,12.0764 12.6719,12.2401 12.5063,12.3747 C12.3406,12.5092 12.1511,12.6137 11.9376,12.6882 C11.7241,12.7627 11.495,12.7999 11.2501,12.7999 L0.364588,12.7999 C0.111221,12.7999 -0.121122,12.763 -0.332442,12.6892 C-0.543762,12.6154 -0.731719,12.5117 -0.896312,12.378 C-1.06091,12.2444 -1.19356,12.0821 -1.29427,11.8913 C-1.39498,11.7004 -1.44533,11.4955 -1.44533,11.2764 C-1.44533,11.0601 -1.39521,10.8571 -1.29498,10.6673 C-1.19474,10.4776 -1.0623,10.3132 -0.897635,10.1741 C-0.732974,10.0351 -0.542779,9.928 -0.327051,9.85279 C-0.111323,9.77758 0.119224,9.73997 0.364588,9.73997 z" Fill="{ThemeResource AppBarItemForegroundThemeBrush}" Height="15.523" RenderTransformOrigin="0.5,0.5" Stretch="Fill" Canvas.Top="12" UseLayoutRounding="False" Width="17.985" Canvas.Left="-2" Opacity="0.6"/>
                                                <!--<TextBlock  Text="&#xE20B;" FontFamily="Segoe UI Symbol" FontSize="26.667" VerticalAlignment="Center" Canvas.Left="10" Width="20"/>-->
                                                <Path Data="M1.53125,16.4362 L18.625,16.4362 C19.0503,16.4362 19.4118,16.5851 19.7096,16.8829 C20.0074,17.1807 20.1562,17.537 20.1562,17.9519 L20.1562,27.7487 C20.1562,28.1669 20.0082,28.524 19.712,28.8202 C19.4159,29.1163 19.0535,29.2644 18.625,29.2644 L15.5781,29.2644 L15.5781,35.3581 L9.01953,29.2644 L1.53125,29.2644 C1.31462,29.2644 1.1132,29.2258 0.927002,29.1488 C0.740804,29.0717 0.579346,28.9648 0.442627,28.8281 C0.305908,28.6914 0.197957,28.5307 0.118774,28.3459 C0.039591,28.1612 0,27.9621 0,27.7487 L0,17.9519 C0,17.5326 0.151082,17.1752 0.453247,16.8796 C0.755412,16.584 1.11475,16.4362 1.53125,16.4362 z" Fill="{ThemeResource AppBarItemForegroundThemeBrush}" Height="30.4" RenderTransformOrigin="0.5,0.5" Stretch="Fill" UseLayoutRounding="False" Width="31.667" Canvas.Top="9" Canvas.Left="20">
                                                    <Path.RenderTransform>
                                                        <TransformGroup>
                                                            <ScaleTransform/>
                                                            <SkewTransform/>
                                                            <RotateTransform/>
                                                            <TranslateTransform/>
                                                        </TransformGroup>
                                                    </Path.RenderTransform>
                                                </Path>
                                            </Canvas>


                                            <TextBlock TextWrapping="Wrap" Text="Share by text" VerticalAlignment="Center" Margin="70,0,0,0"/>
                                        </StackPanel>

                                    </Button>

                                    <Button Click="ShareByMailButton_Click" VerticalAlignment="Stretch" Style="{StaticResource SimpleButton}" HorizontalAlignment="Stretch" HorizontalContentAlignment="Left" Margin="0" Height="90" FontSize="24">
                                        <StackPanel Orientation="Horizontal" Margin="27,0,0,0">


                                            <Canvas>
                                                <!--<TextBlock  Text="&#xE070;" FontFamily="Segoe UI Symbol" FontSize="26.667" VerticalAlignment="Center" Canvas.Left="-1" Width="31"/>-->
                                                <!--<TextBlock  Text="&#xE20B;" FontFamily="Segoe UI Symbol" FontSize="26.667" VerticalAlignment="Center" Canvas.Left="10" Width="20"/>-->
                                                <Path Data="M7.92979,22.4485 L15.0002,22.4485 C15.246,22.4485 15.4778,22.4865 15.6957,22.5626 C15.9136,22.6387 16.1059,22.747 16.2725,22.8876 C16.4391,23.0282 16.5725,23.1908 16.6728,23.3754 C16.773,23.56 16.8231,23.7588 16.8231,23.9719 C16.8231,24.1838 16.7725,24.3856 16.6712,24.5775 C16.57,24.7694 16.4365,24.9352 16.2708,25.0749 C16.105,25.2147 15.9152,25.3219 15.7014,25.3965 C15.4876,25.4711 15.2538,25.5084 15.0002,25.5084 L7.92979,25.5084 C7.67642,25.5084 7.44387,25.4714 7.23215,25.3975 C7.02042,25.3236 6.83219,25.2172 6.66746,25.0782 C6.50273,24.9392 6.37029,24.7749 6.27012,24.5851 C6.16995,24.3954 6.11987,24.191 6.11987,23.9719 C6.11987,23.7519 6.16944,23.5505 6.26859,23.3678 C6.36774,23.185 6.50019,23.0237 6.66594,22.8839 C6.83168,22.744 7.02242,22.6365 7.23815,22.5613 C7.45388,22.4861 7.68442,22.4485 7.92979,22.4485 z M4.16672,16.0942 L12.7866,16.0942 C13.0237,16.0942 13.2512,16.1323 13.4691,16.2084 C13.687,16.2844 13.8788,16.3923 14.0445,16.532 C14.2101,16.6718 14.3436,16.8375 14.4448,17.0294 C14.5459,17.2212 14.5965,17.4217 14.5965,17.6307 C14.5965,17.8465 14.5464,18.0467 14.4462,18.2313 C14.346,18.4159 14.2138,18.5775 14.0497,18.716 C13.8855,18.8546 13.6945,18.9644 13.4764,19.0455 C13.2584,19.1266 13.0285,19.1672 12.7866,19.1672 L4.16672,19.1672 C3.91647,19.1672 3.68352,19.1271 3.46786,19.0468 C3.2522,18.9666 3.06271,18.8576 2.89941,18.7198 C2.7361,18.582 2.60484,18.4217 2.50563,18.239 C2.40641,18.0563 2.3568,17.8535 2.3568,17.6307 C2.3568,17.4144 2.40692,17.2113 2.50715,17.0216 C2.60739,16.8318 2.73983,16.6674 2.9045,16.5284 C3.06916,16.3894 3.25935,16.2822 3.47508,16.207 C3.69081,16.1318 3.92135,16.0942 4.16672,16.0942 z M0.364588,9.73997 L11.2501,9.73997 C11.4872,9.73997 11.7147,9.77802 11.9326,9.85411 C12.1505,9.9302 12.3423,10.0381 12.508,10.1778 C12.6737,10.3175 12.8071,10.4833 12.9083,10.6751 C13.0095,10.867 13.0601,11.0674 13.0601,11.2764 C13.0601,11.4883 13.0092,11.6907 12.9074,11.8836 C12.8056,12.0764 12.6719,12.2401 12.5063,12.3747 C12.3406,12.5092 12.1511,12.6137 11.9376,12.6882 C11.7241,12.7627 11.495,12.7999 11.2501,12.7999 L0.364588,12.7999 C0.111221,12.7999 -0.121122,12.763 -0.332442,12.6892 C-0.543762,12.6154 -0.731719,12.5117 -0.896312,12.378 C-1.06091,12.2444 -1.19356,12.0821 -1.29427,11.8913 C-1.39498,11.7004 -1.44533,11.4955 -1.44533,11.2764 C-1.44533,11.0601 -1.39521,10.8571 -1.29498,10.6673 C-1.19474,10.4776 -1.0623,10.3132 -0.897635,10.1741 C-0.732974,10.0351 -0.542779,9.928 -0.327051,9.85279 C-0.111323,9.77758 0.119224,9.73997 0.364588,9.73997 z" Fill="{ThemeResource AppBarItemForegroundThemeBrush}" Height="15.523" RenderTransformOrigin="0.5,0.5" Stretch="Fill" Canvas.Top="12" UseLayoutRounding="False" Width="17.985" Canvas.Left="-2" Opacity="0.6"/>
                                                <Path Data="M0,4.93016 L8.90127,11.2974 C8.92108,11.3153 8.94624,11.3354 8.97676,11.3575 C9.00727,11.3797 9.06065,11.4089 9.13687,11.4452 C9.2131,11.4815 9.30391,11.5137 9.4093,11.5418 C9.51469,11.5698 9.64218,11.5839 9.79179,11.5839 C9.94112,11.5839 10.0674,11.5701 10.1707,11.5426 C10.274,11.515 10.367,11.4806 10.4498,11.4392 C10.5325,11.3979 10.5948,11.3617 10.6367,11.3308 C10.6786,11.2999 10.7034,11.2799 10.711,11.271 L19.6096,4.93016 L19.6096,15.0084 C19.6096,15.2494 19.5345,15.4095 19.3842,15.4887 C19.2339,15.5678 19.0964,15.6074 18.9716,15.6074 L0.611987,15.6074 C0.486117,15.6074 0.352652,15.5682 0.211591,15.4898 C0.07053,15.4114 0,15.2509 0,15.0084 z M0.611987,1.115 L18.9716,1.115 C19.226,1.115 19.3923,1.18523 19.4704,1.32568 C19.5484,1.46613 19.5948,1.61034 19.6096,1.75832 L19.6096,2.40286 L10.0577,9.50052 L9.54256,9.50052 L0,2.40978 L0,1.69851 C0.012207,1.58797 0.057001,1.46308 0.134381,1.32385 C0.211761,1.18462 0.370963,1.115 0.611987,1.115 z" Fill="{ThemeResource AppBarItemForegroundThemeBrush}" Height="21.4" Canvas.Left="20" RenderTransformOrigin="0.5,0.5" Stretch="Fill" UseLayoutRounding="False" Width="29.722" Canvas.Top="9"/>
                                            </Canvas>


                                            <TextBlock TextWrapping="Wrap" Text="Share by mail" VerticalAlignment="Center" Margin="70,0,0,0"/>
                                        </StackPanel>

                                    </Button>

                                </StackPanel>

                            </Flyout>
                        </Button.Flyout>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="80         "/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>

                            <Path Width="38.364" Height="34.833" Canvas.Left="12.6667" Canvas.Top="15.8333" Stretch="Fill" Fill="{ThemeResource AppBarItemForegroundThemeBrush}" Data="F1 M 19,31.6667C 22.4978,31.6667 25.3333,34.5022 25.3333,38C 25.3333,40.0017 24.4047,41.7865 22.9548,42.9471C 24.9536,49.0304 30.5383,53.4894 37.2083,53.8333C 37.2083,56.2887 38.2245,58.5067 39.8593,60.0898L 38,60.1667C 27.79,60.1667 19.1923,53.2639 16.619,43.8706C 14.3012,42.9295 12.6667,40.6557 12.6667,38C 12.6667,34.5022 15.5022,31.6667 19,31.6667 Z M 45.125,15.8333C 48.6228,15.8333 51.4583,18.6689 51.4583,22.1667C 51.4583,25.6645 48.6228,28.5 45.125,28.5C 41.6337,28.5 38.8022,25.675 38.7917,22.1861C 38.5294,22.1732 38.2655,22.1667 38,22.1667C 31.8493,22.1667 26.5178,25.6738 23.896,30.7973C 22.5009,29.8471 20.8153,29.2917 19,29.2917L 17.559,29.4103C 20.9149,21.4339 28.8034,15.8333 38,15.8333C 39.6024,15.8333 41.165,16.0034 42.6709,16.3263C 43.4256,16.0088 44.2548,15.8333 45.125,15.8333 Z M 45.9167,47.5C 47.3141,47.5 48.6058,47.9526 49.6532,48.7191C 52.2485,45.8991 53.8333,42.1347 53.8333,38C 53.8333,34.5408 52.724,31.3407 50.8417,28.736C 52.6012,27.2036 53.7393,24.9758 53.8278,22.4809C 57.7488,26.4794 60.1667,31.9574 60.1667,38C 60.1667,44.8738 57.0379,51.0169 52.1268,55.0828C 51.5466,57.9822 48.9868,60.1667 45.9167,60.1667C 42.4189,60.1667 39.5833,57.3311 39.5833,53.8333C 39.5833,50.3355 42.4189,47.5 45.9167,47.5 Z " HorizontalAlignment="Center" VerticalAlignment="Center" UseLayoutRounding="False" Margin="0,0,9,0"/>

                            <StackPanel Grid.Column="2">
                                <TextBlock Text="Share location" FontSize="{StaticResource TextStyleExtraLargeFontSize}"/>
                                <TextBlock Text="Share this location to somebody" FontSize="{StaticResource TextStyleLargeFontSize}" Style="{StaticResource ListViewItemSubheaderTextBlockStyle}"/>

                            </StackPanel>

                        </Grid>

                    </Button>

                </StackPanel>

            </Flyout>
        </FlyoutBase.AttachedFlyout>
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:Name="Search">
                <VisualState x:Name="Normal"/>
                <VisualState x:Name="SearchHidden">

                    <Storyboard>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(TextBox.Text)" Storyboard.TargetName="SearchTextBox">
                            <DiscreteObjectKeyFrame KeyTime="0" Value=""/>
                        </ObjectAnimationUsingKeyFrames>
                    </Storyboard>

                </VisualState>
                <VisualState x:Name="SearchVisible">
                    <Storyboard>
                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="grid" d:IsOptimized="True"/>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.IsHitTestVisible)" Storyboard.TargetName="grid">
                            <DiscreteObjectKeyFrame KeyTime="0">
                                <DiscreteObjectKeyFrame.Value>
                                    <x:Boolean>True</x:Boolean>
                                </DiscreteObjectKeyFrame.Value>
                            </DiscreteObjectKeyFrame>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="SearchStatusTextBlock">
                            <DiscreteObjectKeyFrame KeyTime="0">
                                <DiscreteObjectKeyFrame.Value>
                                    <Visibility>Visible</Visibility>
                                </DiscreteObjectKeyFrame.Value>
                            </DiscreteObjectKeyFrame>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="SearchingProgressBar">
                            <DiscreteObjectKeyFrame KeyTime="0">
                                <DiscreteObjectKeyFrame.Value>
                                    <Visibility>Collapsed</Visibility>
                                </DiscreteObjectKeyFrame.Value>
                            </DiscreteObjectKeyFrame>
                        </ObjectAnimationUsingKeyFrames>
                        <DoubleAnimation Duration="0" To="0.5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="GreyPanel" d:IsOptimized="True"/>

                    </Storyboard>
                </VisualState>
                <VisualState x:Name="Searching">
                    <Storyboard>
                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="grid" d:IsOptimized="True"/>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.IsHitTestVisible)" Storyboard.TargetName="grid">
                            <DiscreteObjectKeyFrame KeyTime="0">
                                <DiscreteObjectKeyFrame.Value>
                                    <x:Boolean>True</x:Boolean>
                                </DiscreteObjectKeyFrame.Value>
                            </DiscreteObjectKeyFrame>
                        </ObjectAnimationUsingKeyFrames>

                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="SearchStatusTextBlock">
                            <DiscreteObjectKeyFrame KeyTime="0">
                                <DiscreteObjectKeyFrame.Value>
                                    <Visibility>Visible</Visibility>
                                </DiscreteObjectKeyFrame.Value>
                            </DiscreteObjectKeyFrame>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(TextBlock.Text)" Storyboard.TargetName="SearchStatusTextBlock">
                            <DiscreteObjectKeyFrame KeyTime="0" Value="Searching..."/>
                        </ObjectAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="SearchingProgressBar">
                            <DiscreteObjectKeyFrame KeyTime="0">
                                <DiscreteObjectKeyFrame.Value>
                                    <Visibility>Visible</Visibility>
                                </DiscreteObjectKeyFrame.Value>
                            </DiscreteObjectKeyFrame>
                        </ObjectAnimationUsingKeyFrames>
                        <DoubleAnimation Duration="0" To="0.7" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="GreyPanel" d:IsOptimized="True"/>
                    </Storyboard>
                </VisualState>
            </VisualStateGroup>
            <VisualStateGroup x:Name="VisualStateGroup">
                <VisualState x:Name="NorthIndicatorVisible">
                    <Storyboard>
                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="NorthIndicator">
                            <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                            <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="0"/>
                            <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="1"/>
                        </DoubleAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.IsHitTestVisible)" Storyboard.TargetName="NorthIndicator">
                            <DiscreteObjectKeyFrame KeyTime="0">
                                <DiscreteObjectKeyFrame.Value>
                                    <x:Boolean>True</x:Boolean>
                                </DiscreteObjectKeyFrame.Value>
                            </DiscreteObjectKeyFrame>
                        </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
                </VisualState>
                <VisualState x:Name="NorthIndicatorHidden">
                    <Storyboard>
                        <DoubleAnimation Duration="0:0:0.2" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="NorthIndicator" d:IsOptimized="True"/>
                    </Storyboard>
                </VisualState>
            </VisualStateGroup>
            <VisualStateGroup x:Name="VisualStateGroup1">
                <VisualState x:Name="SearchLocationClear"/>
                <VisualState x:Name="SearchLocationClick">
                    <Storyboard>

                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleY)" Storyboard.TargetName="SearchLocationPoint">
                            <EasingDoubleKeyFrame KeyTime="0:0:0.05" Value="0.85">
                                <EasingDoubleKeyFrame.EasingFunction>
                                    <CircleEase EasingMode="EaseOut"/>
                                </EasingDoubleKeyFrame.EasingFunction>
                            </EasingDoubleKeyFrame>
                            <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="1">
                                <EasingDoubleKeyFrame.EasingFunction>
                                    <BackEase EasingMode="EaseOut" Amplitude="0.3"/>
                                </EasingDoubleKeyFrame.EasingFunction>
                            </EasingDoubleKeyFrame>
                        </DoubleAnimationUsingKeyFrames>
                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleX)" Storyboard.TargetName="SearchLocationPoint">
                            <EasingDoubleKeyFrame KeyTime="0:0:0.05" Value="0.85">
                                <EasingDoubleKeyFrame.EasingFunction>
                                    <CircleEase EasingMode="EaseOut"/>
                                </EasingDoubleKeyFrame.EasingFunction>
                            </EasingDoubleKeyFrame>
                            <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="1">
                                <EasingDoubleKeyFrame.EasingFunction>
                                    <BackEase EasingMode="EaseOut" Amplitude="0.3"/>
                                </EasingDoubleKeyFrame.EasingFunction>
                            </EasingDoubleKeyFrame>
                        </DoubleAnimationUsingKeyFrames>


                    </Storyboard>
                </VisualState>
            </VisualStateGroup>
            <VisualStateGroup x:Name="VisualStateGroup2">
                <VisualState x:Name="SearchAddressPinSearching">
                    <Storyboard>
                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="SearchingText">
                            <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                            <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="0"/>
                            <EasingDoubleKeyFrame KeyTime="0:0:0.4" Value="1"/>
                        </DoubleAnimationUsingKeyFrames>
                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)" Storyboard.TargetName="SearchingText">
                            <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="-30"/>
                            <EasingDoubleKeyFrame KeyTime="0:0:0.4" Value="0">
                                <EasingDoubleKeyFrame.EasingFunction>
                                    <CircleEase EasingMode="EaseOut"/>
                                </EasingDoubleKeyFrame.EasingFunction>
                            </EasingDoubleKeyFrame>
                        </DoubleAnimationUsingKeyFrames>
                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="SearchLocationText" d:IsOptimized="True"/>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(TextBlock.FontFamily)" Storyboard.TargetName="SearchingText">
                            <DiscreteObjectKeyFrame KeyTime="0">
                                <DiscreteObjectKeyFrame.Value>
                                    <FontFamily>Global User Interface</FontFamily>
                                </DiscreteObjectKeyFrame.Value>
                            </DiscreteObjectKeyFrame>
                            <DiscreteObjectKeyFrame KeyTime="0:0:0.2">
                                <DiscreteObjectKeyFrame.Value>
                                    <FontFamily>Global User Interface</FontFamily>
                                </DiscreteObjectKeyFrame.Value>
                            </DiscreteObjectKeyFrame>
                        </ObjectAnimationUsingKeyFrames>



                    </Storyboard>
                </VisualState>
                <VisualState x:Name="SearchAddressPinSearchedFinished">
                    <Storyboard>
                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="SearchingText" d:IsOptimized="True"/>
                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="SearchLocationText">
                            <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                            <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="1"/>
                        </DoubleAnimationUsingKeyFrames>
                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)" Storyboard.TargetName="SearchLocationText">
                            <EasingDoubleKeyFrame KeyTime="0" Value="-30"/>
                            <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="0">
                                <EasingDoubleKeyFrame.EasingFunction>
                                    <CircleEase EasingMode="EaseOut"/>
                                </EasingDoubleKeyFrame.EasingFunction>
                            </EasingDoubleKeyFrame>
                        </DoubleAnimationUsingKeyFrames>

                    </Storyboard>
                </VisualState>
            </VisualStateGroup>
            <VisualStateGroup x:Name="VisualStateGroup3">
                <VisualState x:Name="SearchLocationShow">
                    <Storyboard>
                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="SearchLocationPoint">
                            <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                            <EasingDoubleKeyFrame KeyTime="0:0:0.1" Value="1"/>
                        </DoubleAnimationUsingKeyFrames>
                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleX)" Storyboard.TargetName="SearchLocationPoint">
                            <EasingDoubleKeyFrame KeyTime="0" Value="0.85"/>
                            <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="1">
                                <EasingDoubleKeyFrame.EasingFunction>
                                    <BackEase EasingMode="EaseOut" Amplitude="0.5"/>
                                </EasingDoubleKeyFrame.EasingFunction>
                            </EasingDoubleKeyFrame>
                        </DoubleAnimationUsingKeyFrames>
                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleY)" Storyboard.TargetName="SearchLocationPoint">
                            <EasingDoubleKeyFrame KeyTime="0" Value="0.85"/>
                            <EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="1">
                                <EasingDoubleKeyFrame.EasingFunction>
                                    <BackEase EasingMode="EaseOut" Amplitude="0.5"/>
                                </EasingDoubleKeyFrame.EasingFunction>
                            </EasingDoubleKeyFrame>
                        </DoubleAnimationUsingKeyFrames>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.IsHitTestVisible)" Storyboard.TargetName="SearchLocationPoint">
                            <DiscreteObjectKeyFrame KeyTime="0">
                                <DiscreteObjectKeyFrame.Value>
                                    <x:Boolean>True</x:Boolean>
                                </DiscreteObjectKeyFrame.Value>
                            </DiscreteObjectKeyFrame>
                        </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
                </VisualState>
                <VisualState x:Name="SearchLocationHide"/>
            </VisualStateGroup>
            <VisualStateGroup x:Name="VisualStateGroup4">
                <VisualState x:Name="compassState">
                    <Storyboard>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="ellipse">
                            <DiscreteObjectKeyFrame KeyTime="0">
                                <DiscreteObjectKeyFrame.Value>
                                    <Visibility>Collapsed</Visibility>
                                </DiscreteObjectKeyFrame.Value>
                            </DiscreteObjectKeyFrame>
                        </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
                </VisualState>
                <VisualState x:Name="noCompassState">
                    <Storyboard>
                        <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="path">
                            <DiscreteObjectKeyFrame KeyTime="0">
                                <DiscreteObjectKeyFrame.Value>
                                    <Visibility>Collapsed</Visibility>
                                </DiscreteObjectKeyFrame.Value>
                            </DiscreteObjectKeyFrame>
                        </ObjectAnimationUsingKeyFrames>
                    </Storyboard>
                </VisualState>
            </VisualStateGroup>
            <VisualStateGroup x:Name="VisualStateGroup5">
                <VisualStateGroup.Transitions>
                    <VisualTransition GeneratedDuration="0:0:0.2">
                        <VisualTransition.GeneratedEasingFunction>
                            <BackEase EasingMode="EaseOut" Amplitude="0.4"/>
                        </VisualTransition.GeneratedEasingFunction>
                    </VisualTransition>
                </VisualStateGroup.Transitions>
                <VisualState x:Name="SearchLocationNormal"/>
                <VisualState x:Name="SearchLocationMinimize">
                    <Storyboard>
                        <DoubleAnimation Duration="0" To="0.2" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleX)" Storyboard.TargetName="grid1" d:IsOptimized="True"/>
                        <DoubleAnimation Duration="0" To="0.45" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.ScaleY)" Storyboard.TargetName="grid1" d:IsOptimized="True"/>
                        <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)" Storyboard.TargetName="grid1" d:IsOptimized="True"/>
                        <DoubleAnimation Duration="0" To="20" Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateY)" Storyboard.TargetName="grid1" d:IsOptimized="True"/>
                        <ColorAnimation Duration="0" To="Transparent" Storyboard.TargetProperty="(TextBlock.Foreground).(SolidColorBrush.Color)" Storyboard.TargetName="SearchLocationText" d:IsOptimized="True"/>
                        <ColorAnimation Duration="0" To="Transparent" Storyboard.TargetProperty="(TextBlock.Foreground).(SolidColorBrush.Color)" Storyboard.TargetName="SearchingText" d:IsOptimized="True"/>
                        <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="____Text" d:IsOptimized="True"/>
                    </Storyboard>
                </VisualState>
            </VisualStateGroup>
            <VisualStateGroup x:Name="VisualStateGroup6">
                <VisualState x:Name="showTileName">
                    <Storyboard>
                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="grid2">
                            <EasingDoubleKeyFrame KeyTime="0:0:0.2" Value="1"/>
                            <EasingDoubleKeyFrame KeyTime="0:0:1.2" Value="1"/>
                            <EasingDoubleKeyFrame KeyTime="0:0:1.5" Value="0"/>
                        </DoubleAnimationUsingKeyFrames>
                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.TranslateX)" Storyboard.TargetName="grid2">
                            <EasingDoubleKeyFrame KeyTime="0" Value="-30"/>
                            <EasingDoubleKeyFrame KeyTime="0:0:0.4" Value="0">
                                <EasingDoubleKeyFrame.EasingFunction>
                                    <CircleEase EasingMode="EaseOut"/>
                                </EasingDoubleKeyFrame.EasingFunction>
                            </EasingDoubleKeyFrame>
                        </DoubleAnimationUsingKeyFrames>
                    </Storyboard>
                </VisualState>
                <VisualState x:Name="normalTileName"/>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>

        <Maps:MapControl x:Name="MapCtrl"
    		LandmarksVisible="False"
    		MapServiceToken="{Binding MapServiceToken}" 
                         FontFamily="Global User Interface" 
                         PedestrianFeaturesVisible="False" Background="{x:Null}" 
                         ManipulationMode="All" ScrollViewer.VerticalScrollBarVisibility="Disabled"
                         Opacity="1" IsHitTestVisible="True" 
                         IsDoubleTapEnabled="False"
           >

            <Border x:Name="TouchPanel" ManipulationMode="All" Background="#00000000" Width="1000" Height="1000"/>
            <Canvas x:Name="UserLocation" 
                    Opacity="0"
    			Maps:MapControl.NormalizedAnchorPoint="0.5,0.5" 
    			Width="26" Height="24" 
    			RenderTransformOrigin="0.5,0.5" IsHitTestVisible="False">
                <Canvas.RenderTransform>
                    <CompositeTransform x:Name="UserLocationCompositeTransform" Rotation="0"/>
                </Canvas.RenderTransform>

                <Ellipse x:Name="accuracy" Fill="{ThemeResource PhoneAccentBrush}" 
            		Width="2" Height="2" Canvas.Left="12" Canvas.Top="10" Opacity="0.25" RenderTransformOrigin="0.5,0.5" StrokeThickness="0" 
				>
                    <Ellipse.RenderTransform>
                        <CompositeTransform ScaleX="4" ScaleY="4"/>
                    </Ellipse.RenderTransform>
                </Ellipse>

                <Path x:Name="path" Data="M12.978,0.5 L24.3847,22.832 L24.3958,22.8558 C25.1051,24.4247 25.5,26.1662 25.5,28 C25.5,34.9036 19.9036,40.5 13,40.5 C6.09644,40.5 0.5,34.9036 0.5,28 C0.5,26.2741 0.849777,24.6299 1.48231,23.1344 L1.52754,23.031 z" Fill="Black" HorizontalAlignment="Center" Height="41" RenderTransformOrigin="0.5,0.286976" Stretch="Fill" Stroke="White" UseLayoutRounding="False" VerticalAlignment="Center" Width="26" Canvas.Top="-16"/>
                <Ellipse x:Name="ellipse" 
            		Width="26" Height="26" Stroke="White" Fill="Black" Canvas.Top="-1" 
				/>
                <Ellipse Fill="{ThemeResource PhoneAccentBrush}" 
            		Width="20" Height="20" Stroke="White" StrokeThickness="2" Canvas.Top="2" Canvas.Left="3" 
				/>

            </Canvas>

            <!--<Maps:MapItemsControl x:Name="MapItzems" ItemTemplate="{StaticResource EventPoiTemplate}" />-->

        </Maps:MapControl>




        <Canvas x:Name="SearchLocationPoint" RenderTransformOrigin="0,0" 
		Maps:MapControl.NormalizedAnchorPoint="0.5,1" Tapped="SearchLocationPoint_Tapped" Margin="0" IsHitTestVisible="False" ManipulationStarting="SearchLocationPoint_ManipulationStarting" ManipulationMode="All" Opacity="0" >
            <Canvas.RenderTransform>
                <CompositeTransform/>
            </Canvas.RenderTransform>


            <Image x:Name="image" Height="10" Width="32" Source="Assets/ombre.png" Canvas.Top="-5" Canvas.Left="-16" Opacity="0.6" IsHitTestVisible="False"/>
            <Path Data="M28.6295,13.5002 L44.2042,13.5002 L36.4169,21.2875 z" Stretch="Fill" UseLayoutRounding="False" Fill="#CC1F1F1F" Width="16" Height="9.295" Canvas.Left="-8" Canvas.Top="-10" IsHitTestVisible="False"/>
            <Grid x:Name="grid1" HorizontalAlignment="Left" Background="#CC1F1F1F" Canvas.Left="-100" Canvas.Top="-83" MinWidth="100" RenderTransformOrigin="0.5,0.5" Height="74" Width="200">

                <Grid.RenderTransform>
                    <CompositeTransform/>
                </Grid.RenderTransform>

                <TextBlock x:Name="SearchLocationText" HorizontalAlignment="Center" TextWrapping="Wrap" Text="txt" VerticalAlignment="Center"  FontSize="18.667" MaxLines="3" Margin="3,0" RenderTransformOrigin="0.5,0.5" Foreground="White">
                    <TextBlock.RenderTransform>
                        <CompositeTransform/>
                    </TextBlock.RenderTransform>
                </TextBlock>
                <TextBlock x:Name="SearchingText" HorizontalAlignment="Center" TextWrapping="Wrap" 
            		Text="Searching..." VerticalAlignment="Center" FontSize="18.667" 
            		RenderTransformOrigin="0.5,0.5" Foreground="White">
                    <TextBlock.RenderTransform>
                        <CompositeTransform/>
                    </TextBlock.RenderTransform>
                </TextBlock>
            </Grid>
            <TextBlock x:Name="____Text" HorizontalAlignment="Center" TextWrapping="Wrap" Text="..." VerticalAlignment="Center"  FontSize="26.667" MaxLines="3" RenderTransformOrigin="0.5,0.5" Foreground="White" Canvas.Left="-9" Canvas.Top="-49" Opacity="0">
                <TextBlock.RenderTransform>
                    <CompositeTransform/>
                </TextBlock.RenderTransform>
            </TextBlock>



        </Canvas>



        <Border x:Name="GreyPanel" Background="Black" Width="1000" Height="1000" IsHitTestVisible="False" ManipulationMode="None" Opacity="0" RenderTransformOrigin="0.5,0.5">
            <Border.RenderTransform>
                <CompositeTransform/>
            </Border.RenderTransform>
        </Border>
        <RadioButton Style="{StaticResource RadioButtonStyle1}"
			IsChecked="True" Width="60" Height="60"
			Background="#CC1F1F1F" BorderBrush="{x:Null}" MinWidth="0"
			HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0,38,10,0" Padding="0" FontFamily="Global User Interface" Click="UpdateOverlay">
            <Grid >
                <Image Source="Assets/ic_image.png" Width="26"/>
            </Grid>
        </RadioButton>
        <RadioButton x:Name="NorthIndicator" Style="{StaticResource RadioButtonStyle1}"
			GroupName="VelibParkingSwitch" IsChecked="True"
			Background="#CC1F1F1F" BorderBrush="{x:Null}" MinWidth="0"
			RenderTransformOrigin="0.5,0.5"  Margin="0,95,10,0" VerticalAlignment="Top" Width="60" Height="60" HorizontalAlignment="Right" Click="NorthIndicator_Click" Padding="0" FontFamily="Global User Interface" Opacity="0" IsHitTestVisible="False">

            <RadioButton.RenderTransform>
                <CompositeTransform x:Name="NorthIndicatorCompositeTransform" Rotation="0"/>
            </RadioButton.RenderTransform>

            <Canvas HorizontalAlignment="Left" Height="36" Margin="0,0,0,4" VerticalAlignment="Top" Width="34">

                <TextBlock TextWrapping="Wrap" Text="N" FontSize="9.333" Canvas.Left="14" Canvas.Top="27" HorizontalAlignment="Center" VerticalAlignment="Center" Visibility="Collapsed"/>
                <Path Data="M17.4019,0 L35.1106,24.9999 L17.4811,16.1482 L0,24.6166 z" Fill="#CCFFFFFF" HorizontalAlignment="Center" Height="22" Stretch="Fill" UseLayoutRounding="False" VerticalAlignment="Center" Width="22" RenderTransformOrigin="0.5,0.5" Visibility="Collapsed" Canvas.Left="6.083" Canvas.Top="6.917"/>
                <Path Data="M6.6875,12.6437 L11.5156,17.5969 L23.9688,17.5969 z M2.34375,10.05 L28.3906,17.5969 L2.34375,25.1594 L9.5625,17.5969 z" Fill="White" Height="15.109" Canvas.Left="4" RenderTransformOrigin="0.5,0.5" Stretch="Fill" Canvas.Top="11.72" UseLayoutRounding="False" Width="26.046">
                    <Path.RenderTransform>
                        <TransformGroup>
                            <ScaleTransform/>
                            <SkewTransform/>
                            <RotateTransform Angle="-90"/>
                            <TranslateTransform/>
                        </TransformGroup>
                    </Path.RenderTransform>
                </Path>

            </Canvas>
        </RadioButton>

        <!--<Border Background="#FF303030" VerticalAlignment="Bottom" HorizontalAlignment="Left">
		<HyperlinkButton NavigateUri="http://www.charliehebdo.fr/index.html" VerticalAlignment="Bottom" HorizontalAlignment="Left" Height="64" VerticalContentAlignment="Stretch" HorizontalContentAlignment="Stretch" Padding="0"  >
			<Image Source="Assets/jesuischarlie.png" HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="0,5,0,0"/>
		</HyperlinkButton>
		</Border>-->
        <ToggleButton x:Name="ToggleButtonVelibParking" 
		   HorizontalAlignment="Right" VerticalAlignment="Bottom" Style="{StaticResource ToggleButtonStyle1}" Background="#CC1F1F1F" MinWidth="0" MinHeight="0" BorderBrush="{x:Null}" FontFamily="Global User Interface" Margin="0,0,24,86" Click="ToggleButtonVelibParking_Click"/>

        <Grid x:Name="grid2"  Margin="10,50,0,0" IsHitTestVisible="False" Opacity="0.5" HorizontalAlignment="Left" VerticalAlignment="Top" RenderTransformOrigin="0.5,0.5" MaxWidth="320">
            <Grid.RenderTransform>
                <CompositeTransform/>
            </Grid.RenderTransform>
            <TextBlock HorizontalAlignment="Left" TextWrapping="Wrap" Text="{Binding TileName}" VerticalAlignment="Top" FontSize="29.333" Foreground="#FF4B4B4B" Margin="2,2,0,0"  />
            <TextBlock HorizontalAlignment="Left" TextWrapping="Wrap" Text="{Binding TileName}" VerticalAlignment="Top" FontSize="29.333" Foreground="White"  />

        </Grid>
        <Grid x:Name="grid" VerticalAlignment="Top" IsHitTestVisible="False" Opacity="0" Margin="0,32,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <ProgressBar x:Name="SearchingProgressBar" Height="10" VerticalAlignment="Top" Grid.ColumnSpan="2" Visibility="Collapsed" IsIndeterminate="True"/>
            <ScrollViewer x:Name="scrollViewer" VerticalAlignment="Top" Margin="10,0" >
                <TextBox x:Name="SearchTextBox" VerticalAlignment="Center" PlaceholderText="address" FontFamily="Global User Interface" KeyUp="AddressTextBox_KeyUp"/>
            </ScrollViewer>
            <TextBlock x:Name="SearchStatusTextBlock" HorizontalAlignment="Left" 
    			
        		TextWrapping="Wrap" VerticalAlignment="Bottom" FontSize="16" Margin="10,55,0,0" IsHitTestVisible="False"/>
        </Grid>

    </Grid>
</Page>
